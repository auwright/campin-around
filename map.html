<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Campin Around — Map</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    :root{
      --bg:#0f1724;
      --text:#e6eef8;
      --pin:#ffa500; /* orange */
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    .topbar{padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.12)}
    a{color:#7dd3fc;text-decoration:none}
    #map{height:calc(100% - 50px);}
    .leaflet-popup-content-wrapper{background:#0b1220;color:var(--text);}
    .leaflet-popup-tip{background:#0b1220;}
  </style>
</head>
<body>
  <div class="topbar">
    <a href="index.html">← Back</a> &nbsp; | &nbsp; <strong>Map</strong>
  </div>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Init map
    const map = L.map('map', { scrollWheelZoom: true }).setView([44.1, -121.7], 7);

    // Dark tiles (CartoDB Dark Matter)
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; OpenStreetMap contributors &copy; CARTO'
    }).addTo(map);

    // Load your GeoJSON file (adjust path)
    fetch('data/points.geojson')
      .then(r => r.json())
      .then(geojson => {
        const layer = L.geoJSON(geojson, {
          pointToLayer: (feature, latlng) =>
            L.circleMarker(latlng, {
              radius: 6,
              color: '#000',
              weight: 1,
              fillColor: getColor(feature),
              fillOpacity: 0.95
            }).bindPopup(getPopup(feature))
        }).addTo(map);

        // Fit to data
        try { map.fitBounds(layer.getBounds(), { padding: [20,20] }); } catch(e) {}
      })
      .catch(err => console.error('Failed to load GeoJSON:', err));

    // Helpers
    function getPopup(f){
      const p = f.properties || {};
      const title = p.name || p.title || 'Location';
      const desc  = p.description || p.note || '';
      return `<strong>${title}</strong>${desc ? `<br>${desc}` : ''}`;
    }
    function getColor(f){
      // Use a property to vary color if you like; default orange.
      return f.properties?.color || getComputedStyle(document.documentElement)
        .getPropertyValue('--pin').trim() || '#ffa500';
    }
  </script>
</body>
</html>
